extends ../aalayout/layout

block content
	.container
		-acTime = moment(object.acAt).format('YYYYMMDD');
		-saTime = moment(object.saAt).format('YYYYMMDD');
		
		//- 判断近一周是否有要付款的
		if (today < acTime && acTime < weekday)
			- bgacWeek="bg-info";
		else
			- bgacWeek="bg-default";
		if today < saTime && saTime < weekday
			- bgsaWeek="bg-info";
		else
			- bgsaWeek="bg-default";

		//- 错误状态
		if (object.status == 0) && (acTime < today)
			- bgErr="bg-danger";
		else if (object.status == 1) && (saTime < today)
			- bgErr="bg-danger";
		else
			- bgErr="bg-default";

		//- 状态标记
		if object.status == 1
			- bgSts1="bg-warning";
		else
			- bgSts1="bg-default";
		if object.status == 2
			- bgSts2="bg-warning";
		else
			- bgSts2="bg-default";
		.row(class=bgErr)
			h1.col-sm-6
				span Payment Information: 
			.col-sm-4.text-right
				a.btn.btn-link(href="/fnPaymentList") back payment list
		hr
		h3 supplier: 
			if object.vder
				-a;
				strong #{object.vder.code}
			else
				span loss supplier

		table.table.table-hover.table-bordered
			tr
				th order
				th brand
				th P/I
				th price
				th ac
				th acAt
				th sa
				th saAt
			tr(class="object-id-"+object._id+" "+bgSts2)
				td #{object.order}
				td #{object.brand}
				td #{object.pi}
				td #{object.price}
				td(class=bgSts1) #{object.ac}
				td(class=bgSts1+" "+ bgacWeek)
					if object.acAt
						-a;
						span #{moment(object.acAt).format('YYYY/MM/DD')}
				td #{object.sa}
				td(class=bgsaWeek)
					if object.saAt
						-a;
						span #{moment(object.saAt).format('YYYY/MM/DD')}
		.form-group.row
			label.col-sm-2.col-form-label creater
			.col-sm-4
				- let creater = 'loss';
				if object.creater
					- creater = object.creater.code;
				input.form-control(type="text", value=creater, readonly="readonly")

			label.col-sm-2.col-form-label updater
			.col-sm-4
				- let updater = 'loss';
				if object.updater
					- updater = object.updater.code;
				input.form-control(type="text", value=updater, readonly="readonly")
		.form-group.row
			label.col-sm-2.col-form-label acer
			.col-sm-4
				- let acer = '';
				if object.acer
					- acer = object.acer.code;
				input.form-control(type="text", value=acer, readonly="readonly")

			label.col-sm-2.col-form-label saer
			.col-sm-4
				- let saer = '';
				if object.saer
					- saer = object.saer.code;
				input.form-control(type="text", value=saer, readonly="readonly")
		.form-group.row
			label.col-sm-2.col-form-label status
			.col-sm-10
				input.form-control(type="text", value=Conf.stsPayment[object.status], readonly="readonly")
		.form-group.row
			label.col-sm-2.col-form-label createAt
			.col-sm-4
				input.form-control(type="text", value=moment(object.createAt).format('YYYY/MM/DD'), readonly="readonly")
			label.col-sm-2.col-form-label updateAt
			.col-sm-4
				input.form-control(type="text", value=moment(object.updateAt).format('YYYY/MM/DD'), readonly="readonly")

		dl.dl-horizontal
			dt Note:
			dd #{object.note}
			dt ourNote
			dd #{object.ourNote}
		hr
		.row
			.col-sm-6
				a.btn.btn-danger(href="/fnPaymentDel/"+object._id) delete
	script(src="/js/task/detail.js")
